(function($,window,document,undefined){$.fn.ventForm=function(options){var defaults={username:"#full_name",validationMessage:".validationMessage",requireClass:".required",emailClass:".email",passClass:".pass",passConfirmClass:".pass_confirm",errorClass:"alert error",errorBoxClass:"val-box",otherMessages:".status-messages",statusMessagesClass:"js-status-message",emailRegEx:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,passRegEx:/^.*(?=.{8,})(?=.*[0-9])[a-zA-Z0-9]+$/,consecutiveErrors:true,
appendErrorToTitle:true,saveInputs:true,ajaxMode:true,formSuccessMsgID:"#success_message",defaultSuccessMsg:"You have successfully submitted the form",dataURL:"",successFunction:null};var settings=$.extend({},defaults,options);$.fn.fn_error=function(method){var methods={on:function(){this.each(function(){$(this).addClass(settings.errorClass)});setTimeout(function(){},1E3);return this},off:function(){this.each(function(){$(this).removeClass(settings.errorClass)});return this},clear:function(){this.each(function(){localStorage.removeItem($(this).attr("name"))});
return this}};if(methods[method])return methods[method].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof method==="object"||!method)return methods.on.apply(this,arguments);else $.error("Method "+method+" does not exist on jQuery.fn_error")};$.fn.fn_center=function(method,element){var el=element!=null?$(element):$(window);var methods={all:function(){el.css("position","relative");this.css("position","absolute");this.css("top",(el.height()-this.outerHeight())/2+el.scrollTop()+"px");
this.css("left",(el.width()-this.outerWidth())/2+el.scrollLeft()+"px");return this},vertical:function(){el.css("position","relative");this.css("position","absolute");this.css("top",(el.height()-this.outerHeight())/2+el.scrollTop()+"px");return this},horizontal:function(){el.css("position","relative");this.css("position","absolute");this.css("left",(el.width()-this.outerWidth())/2+el.scrollLeft()+"px");return this}};if(methods[method])return methods[method].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof method==="object"||!method)return methods.all.apply(this,arguments);else $.error("Method "+method+" does not exist on jQuery.center")};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(obj,fromIndex){if(fromIndex==null)fromIndex=0;else if(fromIndex<0)fromIndex=Math.max(0,this.length+fromIndex);for(var i=fromIndex,j=this.length;i<j;i++)if(this[i]===obj)return i;return-1};var utils={loadingAnimation:function(el,size,color){$.getScript("http://heartcode-canvasloader.googlecode.com/files/heartcode-canvasloader-min-0.9.js",
function(){var loader=new CanvasLoader(el);loader.setShape("spiral");loader.setDiameter(size);loader.setDensity(13);loader.setRange(0.6);loader.setSpeed(1);loader.setColor(color);loader.show()})}};return this.each(function(){var plg=$(this);var app={init:function(){$(settings.otherMessages).hide();this.error_numeric="Must be a number";this.form_action=settings.dataURL?settings.dataURL:plg.attr("action");this.cacheElements();this.createElements()},cacheElements:function(){this.status_messages=$('<div class="'+
settings.statusMessagesClass+'"></div>');this.errorBox=$('<span class="'+settings.errorBoxClass+'"></span>')},createElements:function(){plg.before(this.status_messages)},initForm:function(){this.validated=true;this.enquiryname=$(settings.username,plg).val();try{this.successMsg=$(settings.formSuccessMsgID,plg).val().replace("[name]",this.enquiryname)}catch(e){this.successMsg=settings.defaultSuccessMsg}this.errorBox.remove();this.errorArray=[]},getLocalStorage:function(){$("input, select, textarea",
plg).each(function(){var inputID=$(this).attr("name");if(localStorage[inputID])if($(this).is("select")){$('option[selected="selected"]',this).removeAttr("selected");$('option[value="'+localStorage[inputID]+'"]',this).prop("selected",true)}else if($(this).is('input[type="radio"]')){if($(this).val()==localStorage[inputID])$(this).prop("checked",true)}else if($(this).is('input[type="checkbox"]')){var checkboxes=localStorage[inputID].split(",");$('input[name="'+inputID+'"]').each(function(i){if(checkboxes[i]!=
""&&$(this).val()==checkboxes[i])$(this).prop("checked",true)})}else $(this).val(localStorage[inputID])})},resetForm:function(){$("."+settings.errorBoxClass,plg).remove();$('option[selected="selected"]',plg).removeAttr("selected");$("input, select, textarea, label",plg).removeClass(settings.errorClass).fn_error("clear").removeAttr("selected")},addToError:function(element){element.fn_error("on");var id=element.attr("id");if(this.errorArray.indexOf(id)==-1)this.errorArray.push(id)},displayErrors:function(){if(this.errorArray.length>
0){app.validated=false;$.each(this.errorArray,function(i){var field=$("#"+app.errorArray[i],plg);if(field.is('input[type="checkbox"]')||field.is('input[type="radio"]')){var labelField=field.parent().parent().find(".label");var valfield=field.parent().parent().find(settings.validationMessage)}else{var labelField=field.parent().find("label");var valfield=field.parent().find(settings.validationMessage)}if(settings.consecutiveErrors){if(!i){if(valfield.is("input"))app.errorBox.text(valfield.val());else app.errorBox.text(valfield.text());
if(settings.appendErrorToTitle){labelField.append(app.errorBox);app.errorBox.prepend(" - ")}else field.parent().prepend(app.errorBox);app.errorBox.fadeIn(500);field.focus()}}else{if(settings.appendErrorToTitle){labelField.append('<span class="'+settings.errorBoxClass+'"></span>');if(valfield.is("input"))$("."+settings.errorBoxClass).text(" - "+valfield.val());else $("."+settings.errorBoxClass).text(" - "+valfield.text())}else{field.parent().prepend('<span class="'+settings.errorBoxClass+'"></span>');
if(valfield.is("input"))$("."+settings.errorBoxClass).text(valfield.val());else $("."+settings.errorBoxClass).text(valfield.text())}$("."+settings.errorBoxClass).fadeIn(500)}})}},checkhttp:function(element){var value=element.val();if(value!=""&&value.indexOf("http://")==-1)element.val("http://"+value)},formValidated:function(){$("button",plg).attr("disabled","disabled");var rn=Math.random()*(100-1)+1;$('button[type="submit"]',plg).html('<div id="loader-'+rn+'"></div>');$("#loader").fn_center("all");
utils.loadingAnimation("loader-"+rn,13,"#333");this.status_messages.hide();this.errorBox.remove()}};app.init();if(settings.saveInputs&&Modernizr.localstorage){app.getLocalStorage();$("input, select, textarea",plg).change(function(){var inputID=$(this).attr("name");if($(this).is('input[type="checkbox"]')){var checkboxArray=[];$('input[name="'+inputID+'"]').each(function(i){if($(this).is(":checked"))checkboxArray.push($(this).val());else if($(this).is("select"))localStorage[inputID]=$("option:selected",
this).val();else checkboxArray.push("")});localStorage[inputID]=checkboxArray}else localStorage[inputID]=$(this).val()})}$(function(){if($(".status_messages").length)$(".status_messages").hide();$(settings.requireClass,plg).each(function(){$(this).parent().find("label").addClass("required")});$('input[type="url"]',this).each(function(){app.checkhttp($(this))})});$('input[type="url"]',this).each(function(){$(this).on("blur",function(){app.checkhttp($(this))})});$('button[type="reset"], input[type="reset"]',
plg).on("click",function(){app.resetForm()});plg.on("submit",function(){app.initForm();$("input"+settings.requireClass+", textarea"+settings.requireClass+", select"+settings.requireClass,this).each(function(){if($(this).val().length==0||$(this).val()==undefined)app.addToError($(this));else $(this).fn_error("off")});$("input"+settings.emailClass,this).each(function(){if(!settings.emailRegEx.test($(this).val()))app.addToError($(this));else $(this).fn_error("off")});$("input"+settings.passClass,this).each(function(){if(!settings.regPass.test($(this).val()))app.addToError($(this));
else $(this).fn_error("off")});$("input"+settings.passConfirmClass,this).each(function(){if($(this).val()!==$("input."+settings.passClass).val())app.addToError($(this));else $(this).fn_error("off")});var groupArray=[];$('input[type="radio"]'+settings.requireClass+', input[type="checkbox"]'+settings.requireClass+"",this).each(function(){var groupName=$(this).attr("name");if($.inArray(groupName,groupArray)==-1)groupArray.push(groupName)});$.each(groupArray,function(i){var field=$('input[name="'+groupArray[i]+
'"]').serializeArray();if(field.length==0){app.validated=false;$('input[name="'+groupArray[i]+'"]').fn_error("on").parent().fn_error("on").next().fn_error("on");var id=$('input[name="'+groupArray[i]+'"]').attr("id");if(app.errorArray.indexOf(id)==-1)app.errorArray.push(id)}else $('input[name="'+groupArray[i]+'"]').fn_error("off").parent().fn_error("off").next().fn_error("off")});app.displayErrors();if(app.validated){app.formValidated();if(settings.ajaxMode)if($.isFunction(settings.successFunction))settings.successFunction();
else $.ajax({type:"POST",url:app.form_action,data:plg.serialize(),success:function(){plg.hide();app.status_messages.html("<p>"+app.successMsg+"</p>").fadeIn(500);$("input, textarea, select",plg).fn_error("clear")},error:function(xhr,ajaxOptions,thrownError){alert("Failure")}});else{$("input, textarea, select",plg).fn_error("clear");return true}}return false})})}})(jQuery,window,document);