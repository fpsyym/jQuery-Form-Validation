!function(a,b,c,d){"use strict";a.fn.formValidation=function(c){var e={username:"#full_name",validationMessage:"val-message",requireClass:"required",emailClass:"email",passClass:"pass",passConfirmClass:"pass_confirm",errorClass:"alert error",errorBoxClass:"val-box",otherMessages:".status-messages",statusMessagesClass:"js-status-message",emailRegEx:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,passRegEx:/^.*(?=.{8,})(?=.*[0-9])[a-zA-Z0-9]+$/,showErrorMsg:!0,consecutiveErrors:!0,appendErrorToTitle:!0,saveInputs:!0,ajaxMode:!0,formSuccessMsgID:"#success_message",defaultErrorMsg:"Please enter a value",defaultSuccessMsg:"You have successfully submitted the form",defaultSuggestText:"Did you mean",dataURL:"",successFunction:null},f=a.extend({},e,c),g={},h={};return a.fn.fn_error=function(b){var c={on:function(){return this.each(function(){a(this).addClass(f.errorClass)}),setTimeout(function(){},1e3),this},off:function(){return this.each(function(){a(this).removeClass(f.errorClass)}),this},clear:function(){return this.each(function(){localStorage.removeItem(a(this).attr("name"))}),this}};return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.fn_error"),void 0):c.on.apply(this,arguments)},a.fn.fn_center=function(c,d){var e=null!=d?a(d):a(b),f={all:function(){return e.css("position","relative"),this.css("position","absolute"),this.css("top",(e.height()-this.outerHeight())/2+e.scrollTop()+"px"),this.css("left",(e.width()-this.outerWidth())/2+e.scrollLeft()+"px"),this},vertical:function(){return e.css("position","relative"),this.css("position","absolute"),this.css("top",(e.height()-this.outerHeight())/2+e.scrollTop()+"px"),this},horizontal:function(){return e.css("position","relative"),this.css("position","absolute"),this.css("left",(e.width()-this.outerWidth())/2+e.scrollLeft()+"px"),this}};return f[c]?f[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery.center"),void 0):f.all.apply(this,arguments)},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){null==b?b=0:0>b&&(b=Math.max(0,this.length+b));for(var c=b,d=this.length;d>c;c++)if(this[c]===a)return c;return-1}),g.loadingAnimation=function(b,c,d){a.getScript("http://heartcode-canvasloader.googlecode.com/files/heartcode-canvasloader-min-0.9.js",function(){var a=new CanvasLoader(b);a.setShape("spiral"),a.setDiameter(c),a.setDensity(13),a.setRange(.6),a.setSpeed(1),a.setColor(d),a.show()})},h.init=function(a){var b=a.val(),c=h.getMatch(b);this.suggestion=a.next(".suggestion"),this.revealSuggestion(a,c)},h.domains=function(){var a=["aol.com","bellsouth.net","btinternet.com","btopenworld.com","blueyonder.co.uk","comcast.net","cox.net","gmail.com","google.com","googlemail.com","hotmail.co.uk","hotmail.com","hotmail.fr","hotmail.it","icloud.com","live.com","mac.com","mail.com","me.com","msn.com","o2.co.uk","orange.co.uk","outlook.com","outlook.co.uk","sbcglobal.net","verizon.net","virginmedia.com","yahoo.com","yahoo.co.uk","yahoo.com.tw","yahoo.es","yahoo.fr"];return a},h.getMatch=function(a){for(var b=99,a=a.split("@"),c=h.domains(),d=0,e=c.length;e>d;d++){var f=h.levenshteinDistance(c[d],a[1]);if(b>f){b=f;var g=c[d]}}return 2>=b&&null!==g&&g!==a[1]?{address:a[0],domain:g}:!1},h.levenshteinDistance=function(a,b){if(null==a||0===a.length)return null==b||0===b.length?0:b.length;if(null==b||0===b.length)return a.length;for(var c=0,d=0,e=0,f=0,g=5;c+d<a.length&&c+e<b.length;){if(a[c+d]==b[c+e])f++;else{d=0,e=0;for(var h=0;g>h;h++){if(c+h<a.length&&a[c+h]==b[c]){d=h;break}if(c+h<b.length&&a[c]==b[c+h]){e=h;break}}}c++}return(a.length+b.length)/2-f},h.revealSuggestion=function(b,c){c&&(a(".address",this.suggestion).text(c.address),a(".domain",this.suggestion).text(c.domain),this.suggestion.stop(!0,!1).slideDown(350),a(".alternative-email").on("click",function(a){a.preventDefault(),b.val(c.address+"@"+c.domain),h.suggestion.stop(!0,!1).slideUp(350)}))},this.each(function(){var b=a(this),c={};c.init=function(){b.attr("novalidate","novalidate"),a(f.otherMessages,b).hide(),this.error_numeric="Must be a number",this.form_action=f.dataURL?f.dataURL:b.attr("action"),this.cacheElements(),this.createElements()},c.cacheElements=function(){this.status_messages=a('<div class="'+f.statusMessagesClass+'"></div>'),this.errorBox=a('<span class="'+f.errorBoxClass+'"></span>')},c.createElements=function(){b.before(this.status_messages)},c.initForm=function(){this.validated=!0,this.enquiryname=a(f.username,b).val();try{this.successMsg=a(f.formSuccessMsgID,b).val().replace("[name]",this.enquiryname)}catch(c){this.successMsg=f.defaultSuccessMsg}this.errorBox.empty().remove(),a("."+f.errorBoxClass).empty().remove(),this.errorArray=[]},c.getLocalStorage=function(){a("input, select, textarea",b).each(function(){var b=a(this).attr("name");if(localStorage[b])if(a(this).is("select"))a('option[selected="selected"]',this).removeAttr("selected"),a('option[value="'+localStorage[b]+'"]',this).prop("selected",!0);else if(a(this).is('input[type="radio"]'))a(this).val()==localStorage[b]&&a(this).prop("checked",!0);else if(a(this).is('input[type="checkbox"]')){var c=localStorage[b].split(",");a('input[name="'+b+'"]').each(function(b){""!=c[b]&&a(this).val()==c[b]&&a(this).prop("checked",!0)})}else a(this).val(localStorage[b])})},c.resetForm=function(){a("."+f.errorBoxClass,b).remove(),a('option[selected="selected"]',b).removeAttr("selected"),a("input, select, textarea, label",b).removeClass(f.errorClass).fn_error("clear").removeAttr("selected")},c.addToError=function(a){a.fn_error("on");var b=a.attr("id");-1==this.errorArray.indexOf(b)&&this.errorArray.push(b)},c.displayErrors=function(){this.errorArray.length>0&&(c.validated=!1,a.each(this.errorArray,function(d){var g,h,i,e=a("#"+c.errorArray[d],b);e.is('input[type="checkbox"]')||e.is('input[type="radio"]')?(g=e.parent().parent().find(".label"),h=e.parent().parent().find("."+f.validationMessage)):(g=e.parent().find("label"),h=e.parent().find("."+f.validationMessage));var i=h.length?h.val()||h.text():f.defaultErrorMsg;f.showErrorMsg&&(f.consecutiveErrors?d||(c.errorBox.text(i),f.appendErrorToTitle?(c.errorBox.prepend(" - "),g.append(c.errorBox)):e.parent().prepend(c.errorBox),c.errorBox.fadeIn(500),e.focus()):(f.appendErrorToTitle?(g.append('<span class="'+f.errorBoxClass+'"></span>'),a("."+f.errorBoxClass).text(" - "+i)):(e.parent().prepend('<span class="'+f.errorBoxClass+'"></span>'),a("."+f.errorBoxClass).text(" - "+i)),a("."+f.errorBoxClass).fadeIn(500)))}))},c.checkhttp=function(a){var b=a.val();""!=b&&-1==b.indexOf("http://")&&a.val("http://"+b)},c.formValidated=function(){a("button",b).attr("disabled","disabled");var d=99*Math.random()+1;c.buttonName=a('button[type="submit"]',b).text(),a('button[type="submit"]',b).html('<div id="loader-'+d+'"></div>'),a("#loader").fn_center("all"),g.loadingAnimation("loader-"+d,13,"#333"),this.status_messages.hide(),this.errorBox.remove()},c.init(),f.saveInputs&&"undefined"!=typeof Storage&&(c.getLocalStorage(),a("input, select, textarea",b).change(function(){var b=a(this).attr("name");if(a(this).is('input[type="checkbox"]')){var c=[];a('input[name="'+b+'"]').each(function(){a(this).is(":checked")?c.push(a(this).val()):a(this).is("select")?localStorage[b]=a("option:selected",this).val():c.push("")}),localStorage[b]=c}else localStorage[b]=a(this).val()})),a(function(){a(".status_messages").length&&a(".status_messages").hide(),a("."+f.validationMessage).length&&a("."+f.validationMessage).hide(),a(f.requireClass,b).each(function(){a(this).parent().find("label, .label").addClass("required")}),a('input[type="url"]',b).each(function(){a(this).on("blur",function(){c.checkhttp(a(this))})}),a('button[type="reset"], input[type="reset"]',b).on("click",function(){c.resetForm()}),a(".email",b).each(function(){var b=a('<div class="suggestion">'+f.defaultSuggestText+' <a href="#" class="alternative-email"><span class="address">address</span>@<span class="domain">yourdomain.com</span></a>?</div>');a(this).after(b.hide()),a(this).on({blur:function(){h.init(a(this))}})})}),b.on("submit",function(){if(c.initForm(),a("."+f.requireClass+",."+f.emailClass+",."+f.passClass+",."+f.passConfirmClass,this).each(function(){if(a(this).hasClass(f.requireClass)&&0==a(this).val().length||a(this).val()==d)c.addToError(a(this));else if(a(this).hasClass(f.emailClass)&&!f.emailRegEx.test(a(this).val()))c.addToError(a(this));else if(a(this).hasClass(f.passClass)&&!f.regPass.test(a(this).val()))c.addToError(a(this));else if(a(this).hasClass(f.passConfirmClass)&&a(this).val()!==a("input."+f.passClass).val())c.addToError(a(this));else if(a(this).hasClass(f.requireClass)&&a(this).is('input[type="radio"]')||a(this).is('input[type="checkbox"]')){var b=a(this).attr("name"),e=a('input[name="'+b+'"]');if(0==e.serializeArray().length){a(this).fn_error("on").parent().parent().find(".label, label").fn_error("on");var g=e.attr("id");-1==c.errorArray.indexOf(g)&&c.errorArray.push(g)}else a(this).fn_error("off").parent().parent().find(".label, label").fn_error("off")}else a(this).fn_error("off")}),c.displayErrors(),c.validated){if(c.formValidated(),!f.ajaxMode)return a("input, textarea, select",b).fn_error("clear"),!0;a.isFunction(f.successFunction)?f.successFunction():a.ajax({type:"POST",url:c.form_action,data:b.serialize(),success:function(){b.hide(),c.status_messages.html("<p>"+c.successMsg+"</p>").fadeIn(500),a("input, textarea, select",b).fn_error("clear")},error:function(){alert("Failure"),a("button",b).removeAttr("disabled"),a('button[type="submit"]',b).html(c.buttonName)}})}return!1})})}}(jQuery,window,document);
