(function(a,n,p,l){a.fn.formValidation=function(h){var b=a.extend({},{username:"#full_name",validationMessage:"validationMessage",requireClass:"required",emailClass:"email",passClass:"pass",passConfirmClass:"pass_confirm",errorClass:"alert error",errorBoxClass:"val-box",otherMessages:".status-messages",statusMessagesClass:"js-status-message",emailRegEx:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,passRegEx:/^.*(?=.{8,})(?=.*[0-9])[a-zA-Z0-9]+$/,showErrorMsg:!0,consecutiveErrors:!0,
appendErrorToTitle:!0,saveInputs:!0,ajaxMode:!0,formSuccessMsgID:"#success_message",defaultErrorMsg:"Please enter a value",defaultSuccessMsg:"You have successfully submitted the form",dataURL:"",successFunction:null},h);a.fn.fn_error=function(d){var c={on:function(){this.each(function(){a(this).addClass(b.errorClass)});setTimeout(function(){},1E3);return this},off:function(){this.each(function(){a(this).removeClass(b.errorClass)});return this},clear:function(){this.each(function(){localStorage.removeItem(a(this).attr("name"))});
return this}};if(c[d])return c[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)a.error("Method "+d+" does not exist on jQuery.fn_error");else return c.on.apply(this,arguments)};a.fn.fn_center=function(b,c){var f=null!=c?a(c):a(n),g={all:function(){f.css("position","relative");this.css("position","absolute");this.css("top",(f.height()-this.outerHeight())/2+f.scrollTop()+"px");this.css("left",(f.width()-this.outerWidth())/2+f.scrollLeft()+"px");return this},vertical:function(){f.css("position",
"relative");this.css("position","absolute");this.css("top",(f.height()-this.outerHeight())/2+f.scrollTop()+"px");return this},horizontal:function(){f.css("position","relative");this.css("position","absolute");this.css("left",(f.width()-this.outerWidth())/2+f.scrollLeft()+"px");return this}};if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)a.error("Method "+b+" does not exist on jQuery.center");else return g.all.apply(this,arguments)};Array.prototype.indexOf||
(Array.prototype.indexOf=function(a,b){null==b?b=0:0>b&&(b=Math.max(0,this.length+b));for(var f=b,g=this.length;f<g;f++)if(this[f]===a)return f;return-1});var e={loadingAnimation:function(b,c,f){a.getScript("http://heartcode-canvasloader.googlecode.com/files/heartcode-canvasloader-min-0.9.js",function(){var a=new CanvasLoader(b);a.setShape("spiral");a.setDiameter(c);a.setDensity(13);a.setRange(0.6);a.setSpeed(1);a.setColor(f);a.show()})}};return this.each(function(){var d=a(this),c={init:function(){d.attr("novalidate",
"novalidate");a(b.otherMessages).hide();this.error_numeric="Must be a number";this.form_action=b.dataURL?b.dataURL:d.attr("action");this.cacheElements();this.createElements()},cacheElements:function(){this.status_messages=a('<div class="'+b.statusMessagesClass+'"></div>');this.errorBox=a('<span class="'+b.errorBoxClass+'"></span>')},createElements:function(){d.before(this.status_messages)},initForm:function(){this.validated=!0;this.enquiryname=a(b.username,d).val();try{this.successMsg=a(b.formSuccessMsgID,
d).val().replace("[name]",this.enquiryname)}catch(f){this.successMsg=b.defaultSuccessMsg}this.errorBox.empty().remove();a("."+b.errorBoxClass).empty().remove();this.errorArray=[]},getLocalStorage:function(){a("input, select, textarea",d).each(function(){var b=a(this).attr("name");if(localStorage[b])if(a(this).is("select"))a('option[selected="selected"]',this).removeAttr("selected"),a('option[value="'+localStorage[b]+'"]',this).prop("selected",!0);else if(a(this).is('input[type="radio"]'))a(this).val()==
localStorage[b]&&a(this).prop("checked",!0);else if(a(this).is('input[type="checkbox"]')){var c=localStorage[b].split(",");a('input[name="'+b+'"]').each(function(b){""!=c[b]&&a(this).val()==c[b]&&a(this).prop("checked",!0)})}else a(this).val(localStorage[b])})},resetForm:function(){a("."+b.errorBoxClass,d).remove();a('option[selected="selected"]',d).removeAttr("selected");a("input, select, textarea, label",d).removeClass(b.errorClass).fn_error("clear").removeAttr("selected")},addToError:function(a){a.fn_error("on");
a=a.attr("id");-1==this.errorArray.indexOf(a)&&this.errorArray.push(a)},displayErrors:function(){0<this.errorArray.length&&(c.validated=!1,a.each(this.errorArray,function(f){var g=a("#"+c.errorArray[f],d);if(g.is('input[type="checkbox"]')||g.is('input[type="radio"]'))var h=g.parent().parent().find(".label"),e=g.parent().parent().find("."+b.validationMessage);else h=g.parent().find("label"),e=g.parent().find("."+b.validationMessage);e=e.length?e.val()||e.text():b.defaultErrorMsg;b.showErrorMsg&&(b.consecutiveErrors?
f||(c.errorBox.text(e),b.appendErrorToTitle?(c.errorBox.prepend(" - "),h.append(c.errorBox)):g.parent().prepend(c.errorBox),c.errorBox.fadeIn(500),g.focus()):(b.appendErrorToTitle?h.append('<span class="'+b.errorBoxClass+'"></span>'):g.parent().prepend('<span class="'+b.errorBoxClass+'"></span>'),a("."+b.errorBoxClass).text(" - "+e),a("."+b.errorBoxClass).fadeIn(500)))}))},checkhttp:function(a){var b=a.val();""!=b&&-1==b.indexOf("http://")&&a.val("http://"+b)},formValidated:function(){a("button",
d).attr("disabled","disabled");var b=99*Math.random()+1;c.buttonName=a('button[type="submit"]',d).text();a('button[type="submit"]',d).html('<div id="loader-'+b+'"></div>');a("#loader").fn_center("all");e.loadingAnimation("loader-"+b,13,"#333");this.status_messages.hide();this.errorBox.remove()}};c.init();b.saveInputs&&"undefined"!==typeof Storage&&(c.getLocalStorage(),a("input, select, textarea",d).change(function(){var b=a(this).attr("name");if(a(this).is('input[type="checkbox"]')){var c=[];a('input[name="'+
b+'"]').each(function(d){a(this).is(":checked")?c.push(a(this).val()):a(this).is("select")?localStorage[b]=a("option:selected",this).val():c.push("")});localStorage[b]=c}else localStorage[b]=a(this).val()}));a(function(){a(".status_messages").length&&a(".status_messages").hide();a("."+b.validationMessage).length&&a("."+b.validationMessage).hide();a(b.requireClass,d).each(function(){a(this).parent().find("label, .label").addClass("required")});a('input[type="url"]',this).each(function(){a(this).on("blur",
function(){c.checkhttp(a(this))})});a('button[type="reset"], input[type="reset"]',d).on("click",function(){c.resetForm()})});d.on("submit",function(){c.initForm();a("."+b.requireClass+",."+b.emailClass+",."+b.passClass+",."+b.passConfirmClass,this).each(function(){if(a(this).hasClass(b.requireClass)&&0==a(this).val().length||a(this).val()==l)c.addToError(a(this));else if(a(this).hasClass(b.emailClass)&&!b.emailRegEx.test(a(this).val()))c.addToError(a(this));else if(a(this).hasClass(b.passClass)&&
!b.regPass.test(a(this).val()))c.addToError(a(this));else if(a(this).hasClass(b.passConfirmClass)&&a(this).val()!==a("input."+b.passClass).val())c.addToError(a(this));else if(a(this).hasClass(b.requireClass)&&a(this).is('input[type="radio"]')||a(this).is('input[type="checkbox"]')){var d=a(this).attr("name"),d=a('input[name="'+d+'"]');0==d.serializeArray().length?(a(this).fn_error("on").parent().parent().find(".label, label").fn_error("on"),d=d.attr("id"),-1==c.errorArray.indexOf(d)&&c.errorArray.push(d)):
a(this).fn_error("off").parent().parent().find(".label, label").fn_error("off")}else a(this).fn_error("off")});c.displayErrors();if(c.validated)if(c.formValidated(),b.ajaxMode)a.isFunction(b.successFunction)?b.successFunction():a.ajax({type:"POST",url:c.form_action,data:d.serialize(),success:function(){d.hide();c.status_messages.html("<p>"+c.successMsg+"</p>").fadeIn(500);a("input, textarea, select",d).fn_error("clear")},error:function(b,h,e){alert("Failure");a("button",d).removeAttr("disabled");
a('button[type="submit"]',d).html(c.buttonName)}});else return a("input, textarea, select",d).fn_error("clear"),!0;return!1})})};a(function(){a('.email, input[type="email"]').each(function(){var h=a('<div class="suggestion">Did you mean <a href="#" class="alternate_email"><span class="toplevel">something</span>@<span class="dom">yourdomain.com</span></a>?</div>');a(this).after(h.hide())});k!==l&&k.emailsuggest!==l&&(k.emailsuggest.init!==l&&k.emailsuggest.init(),k.emailsuggest.query!==l&&k.emailsuggest.query.init!==
l&&k.emailsuggest.query.init())});var m,k={Models:{},Collections:{}};m={emailDomainSuggester:function(a){var b="aol.com bellsouth.net btinternet.com btopenworld.com blueyonder.co.uk comcast.net cox.net gmail.com google.com googlemail.com hotmail.co.uk hotmail.com hotmail.fr hotmail.it icloud.com live.com mac.com mail.com me.com msn.com o2.co.uk orange.co.uk outlook.com outlook.co.uk sbcglobal.net verizon.net virginmedia.com yahoo.com yahoo.co.uk yahoo.com.tw yahoo.es yahoo.fr".split(" ");a=a.split("@");
for(var e,d=99,c=null,f=0;f<b.length;f++)e=this.stringDistance(b[f],a[1]),e<d&&(d=e,c=b[f]);return 2>=d&&null!==c&&c!==a[1]?{address:a[0],domain:c}:!1},stringDistance:function(a,b){if(null==a||0===a.length)return null==b||0===b.length?0:b.length;if(null==b||0===b.length)return a.length;for(var e=0,d=0,c=0,f=0;e+d<a.length&&e+c<b.length;){if(a[e+d]==b[e+c])f++;else for(var g=c=d=0;5>g;g++){if(e+g<a.length&&a[e+g]==b[e]){d=g;break}if(e+g<b.length&&a[e]==b[e+g]){c=g;break}}e++}return(a.length+b.length)/
2-f}};k.emailsuggest={query:{init:function(){this.suggestedEmail=null;a('.email, input[type="email"]').on("blur",this.suggestEmail);a(".suggestion .alternate_email").on("click",this.fillInSuggestedEmail)},suggestEmail:function(h){h=a(this).val();h=m.emailDomainSuggester(h);var b=a(this).parent().find(".suggestion"),e=a(".toplevel",b),d=a(".dom",b);h?(e.html(h.address),d.html(h.domain),k.emailsuggest.query.suggestedEmail=h,b.slideDown(500)):(k.emailsuggest.query.suggestedEmail=null,b.slideUp(500))},
fillInSuggestedEmail:function(h,b){h.preventDefault();var e=k.emailsuggest.query.suggestedEmail;e&&(a(this).parent().parent().find(".email").val(e.address+"@"+e.domain),a(this).parent(".suggestion").slideUp(500))}}}})(jQuery,window,document);
